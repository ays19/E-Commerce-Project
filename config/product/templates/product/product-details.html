{% extends 'base.html' %}
{% load static %}

{% block title %} {{ product.title }} {% endblock title %}

{% block content %}

<!-- Product Page Section Begin -->
<section class="product-page spad">
    <div class="container">

        <!-- Navigation -->
        <div class="product-control mb-4">
            <a href="{% url 'home' %}">Home</a> /
            <a href="#">{{ product.category.title }}</a>
        </div>

        <div class="row">

            <!-- Product Image -->
            <div class="col-lg-6">
                <div class="product-slider">
                    <div class="product-img">
                        <figure>
                            <img src="{{ product.thumbnail.url }}" alt="{{ product.title }}">
                            {% if product.featured %}
                                <div class="p-status">Featured</div>
                            {% endif %}
                        </figure>
                    </div>
                </div>
            </div>

            <!-- Product Info -->
            <div class="col-lg-6">
                <div class="product-content">

                    <h2>{{ product.title }}</h2>

                    <div class="pc-meta">
                        <h5>৳ {{ product.price }}</h5>
                        <div class="rating">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                    </div>

                    <p class="mb-4">
                        {{ product.description }}
                    </p>

                    <!-- Product Meta -->
                    <ul class="tags mb-4">
                        <li>
                            <span>Category :</span> {{ product.category.title }}
                        </li>
                        <li>
                            <span>Availability :</span>
                            {% if product.count > 0 %}
                                <span class="text-success">
                                    {{ product.count }} in stock
                                </span>
                            {% else %}
                                <span class="text-danger">
                                    Out of stock
                                </span>
                            {% endif %}
                        </li>
                    </ul>

                    <!-- Quantity (UI only – backend later) -->
                    <div class="product-quantity mb-4">
                        <div class="pro-qty">
                            <input type="text" value="1" readonly>
                        </div>
                    </div>

                    <!-- Add to Cart -->
                    {% if product.count > 0 %}
                        <a href="{% url 'add_to_cart' product.id %}" class="primary-btn pc-btn">
                            Add to Cart
                        </a>
                    {% else %}
                        <button class="primary-btn pc-btn disabled" disabled>
                            Out of Stock
                        </button>
                    {% endif %}

                    <!-- Extra Info Tabs (UI Ready) -->
                    <ul class="p-info mt-5">
                        <li class="active">Product Information</li>
                        <li>Reviews</li>
                        <li>Product Care</li>
                    </ul>

                </div>
            </div>

        </div>
    </div>
</section>
<!-- Product Page Section End -->

<!-- Related Products -->
<section class="related-product spad">
    <div class="container">

        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="section-title">
                    <h2>Related Products</h2>
                </div>
            </div>
        </div>

        <div class="row">
            {% for related in related_products %}
            <div class="col-lg-3 col-sm-6">
                <div class="single-product-item">
                    <figure>
                        <a href="{% url 'product-details' related.slug %}">
                            <img src="{{ related.thumbnail.url }}" alt="{{ related.title }}">
                        </a>
                    </figure>
                    <div class="product-text">
                        <h6>{{ related.title }}</h6>
                        <p>৳ {{ related.price }}</p>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center">
                <p>No related products found.</p>
            </div>
            {% endfor %}
        </div>

    </div>
</section>
<!-- Related Product Section End -->

{% endblock content %}
